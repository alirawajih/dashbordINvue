{"ast":null,"code":"import { ability } from \"@/ability/defineApilty\";\nimport router from \"@/router\";\nimport { login } from \"@/jsc/loginuser\";\nimport * as yup from \"yup\";\nimport { Form, Field, ErrorMessage, useField, useForm } from \"vee-validate\";\nexport default {\n  name: \"login\",\n  components: {\n    Field,\n    Form,\n    ErrorMessage\n  },\n  data() {\n    const {\n      handleSubmit\n    } = useForm();\n    const onSubmit = handleSubmit(values => {\n      login(values.email, values.password).then(user => {\n        localStorage.setItem(\"user\", JSON.stringify(user));\n        localStorage.setItem('theme', $store.state.theme);\n        ability.update(user.ability);\n        router.replace({\n          path: \"/\"\n        });\n      }).catch(e => this.message = \"email or password is incorrect\");\n    });\n    const {\n      value: email,\n      errorMessage: erroremail\n    } = useField(\"email\", yup.string().email().required());\n    const {\n      value: password,\n      errorMessage: errorpassword\n    } = useField(\"password\", yup.string().min(3).required());\n    return {\n      message: \"\",\n      email,\n      password,\n      errorpassword,\n      erroremail,\n      handleSubmit,\n      onSubmit\n    };\n  },\n  created() {},\n  methods: {\n    // async submit() {\n    //   // console.log(handleSubmit)\n    //   // login(this.email, this.password)\n    //   //   .then((user) => {\n    //   //     localStorage.setItem(\"user\", JSON.stringify(user));\n    //   //     // updateability(user.position)\n    //   //     ability.update(user.ability);\n    //   //     router.replace({ path: \"/\" });\n    //   //     // timeout()\n    //   //   })\n    //   //   .catch((e) => (this.message = \"email or password is incorrect\"));\n    //   ///////////////////\n    //   // this.$store\n    //   //   .dispatch(\"login\", this.user)\n    //   //   .then((user) => {\n    //   //     localStorage.setItem(\"user\", JSON.stringify(user));\n    //   //     // updateability(user.position)\n    //   //     ability.update(user.ability);\n    //   //     router.replace({ path: \"/\" });\n    //   //     // timeout()\n    //   //   })\n    //   //   .catch((e) => (this.message = \"email or password is incorrect\"));\n    //   /////////////////////\n    //   // this.$store.dispatch(\"login\", this.user)\n    //   // if(this.$store.state.auth){\n    //   //   localStorage.setItem('user' ,JSON.stringify(this.$store.state.auth))\n    //   //   router.replace({name:\"ecommerce\"})\n    //   // }else{\n    //   //   this.message = \"email or password is incorrect\"\n    //   // }\n    // },\n    // login() {},\n  }\n};","map":{"version":3,"names":["ability","router","login","yup","Form","Field","ErrorMessage","useField","useForm","name","components","data","handleSubmit","onSubmit","values","email","password","then","user","localStorage","setItem","JSON","stringify","$store","state","theme","update","replace","path","catch","e","message","value","errorMessage","erroremail","string","required","errorpassword","min","created","methods"],"sources":["/var/www/html/project/Dash_Vuexy-master/src/views/login/login.vue"],"sourcesContent":["<template>\n  <template class=\"template\">\n    <main class=\"form-signin w-100 m-auto\">\n      <form @submit.prevent=\"onSubmit\">\n        <div class=\"alert alert-danger\" role=\"alert\" v-if=\"message\">\n          {{ message }}\n        </div>\n\n        <h1 class=\"h3 mb-3 fw-normal text-dark\">Please sign in</h1>\n\n        <div class=\"form-floating\">\n          <input\n            v-model=\"email\"\n            name=\"email\"\n            class=\"form-control\"\n            type=\"email\"\n          />\n          <span class=\"p-error text-danger\"> {{ erroremail }}</span>\n        </div>\n        <div class=\"form-floating\">\n          <input\n            v-model=\"password\"\n            name=\"password\"\n            class=\"form-control\"\n            type=\"password\"\n          />\n          <span class=\"p-error text-danger\"> {{ errorpassword }}</span>\n        </div>\n\n        <div class=\"checkbox mb-3 text-dark\">\n          <label>\n            <input type=\"checkbox\" name=\"checkbox\" value=\"remember-me\" />\n            Remember me\n          </label>\n        </div>\n        <button class=\"w-100 btn btn-lg btn-primary\" type=\"submit\">\n          Sign in\n        </button>\n      </form>\n    </main>\n  </template>\n</template>\n<script>\nimport { ability } from \"@/ability/defineApilty\";\nimport router from \"@/router\";\nimport { login } from \"@/jsc/loginuser\";\nimport * as yup from \"yup\";\nimport { Form, Field, ErrorMessage, useField, useForm } from \"vee-validate\";\nexport default {\n  name: \"login\",\n\n  components: {\n    Field,\n    Form,\n    ErrorMessage,\n  },\n  data() {\n    const { handleSubmit } = useForm();\n\n    const onSubmit = handleSubmit((values) => {\n      login(values.email, values.password)\n        .then((user) => {\n          localStorage.setItem(\"user\", JSON.stringify(user));\n          localStorage.setItem('theme',$store.state.theme)\n          ability.update(user.ability);\n          router.replace({ path: \"/\" });\n        })\n        .catch((e) => (this.message = \"email or password is incorrect\"));\n    });\n    const { value: email, errorMessage: erroremail } = useField(\n      \"email\",\n\n      yup.string().email().required()\n    );\n    const { value: password, errorMessage: errorpassword } = useField(\n      \"password\",\n\n      yup.string().min(3).required()\n    );\n\n    return {\n      message: \"\",\n      email,\n      password,\n      errorpassword,\n      erroremail,\n      handleSubmit,\n      onSubmit,\n    };\n  },\n  created() {},\n  methods: {\n    // async submit() {\n    //   // console.log(handleSubmit)\n    //   // login(this.email, this.password)\n    //   //   .then((user) => {\n    //   //     localStorage.setItem(\"user\", JSON.stringify(user));\n    //   //     // updateability(user.position)\n    //   //     ability.update(user.ability);\n    //   //     router.replace({ path: \"/\" });\n    //   //     // timeout()\n    //   //   })\n    //   //   .catch((e) => (this.message = \"email or password is incorrect\"));\n    //   ///////////////////\n    //   // this.$store\n    //   //   .dispatch(\"login\", this.user)\n    //   //   .then((user) => {\n    //   //     localStorage.setItem(\"user\", JSON.stringify(user));\n    //   //     // updateability(user.position)\n    //   //     ability.update(user.ability);\n    //   //     router.replace({ path: \"/\" });\n    //   //     // timeout()\n    //   //   })\n    //   //   .catch((e) => (this.message = \"email or password is incorrect\"));\n    //   /////////////////////\n    //   // this.$store.dispatch(\"login\", this.user)\n    //   // if(this.$store.state.auth){\n    //   //   localStorage.setItem('user' ,JSON.stringify(this.$store.state.auth))\n    //   //   router.replace({name:\"ecommerce\"})\n    //   // }else{\n    //   //   this.message = \"email or password is incorrect\"\n    //   // }\n    // },\n    // login() {},\n    \n  },\n};\n</script>\n<style scoped>\n.template {\n  height: 997px;\n}\n\n.template {\n  display: flex;\n  align-items: center;\n  padding-top: 0px;\n  background-color: #f5f5f5;\n}\n\n.form-signin {\n  max-width: 330px;\n  padding: 15px;\n}\n\n.form-signin .form-floating:focus-within {\n  z-index: 2;\n}\n\n.form-signin input[type=\"email\"] {\n  margin-bottom: -1px;\n  border-bottom-right-radius: 0;\n  border-bottom-left-radius: 0;\n}\n\n.form-signin input[type=\"password\"] {\n  margin-bottom: 10px;\n  border-top-left-radius: 0;\n  border-top-right-radius: 0;\n}\n</style>"],"mappings":"AA2CA,SAASA,OAAM,QAAS,wBAAwB;AAChD,OAAOC,MAAK,MAAO,UAAU;AAC7B,SAASC,KAAI,QAAS,iBAAiB;AACvC,OAAO,KAAKC,GAAE,MAAO,KAAK;AAC1B,SAASC,IAAI,EAAEC,KAAK,EAAEC,YAAY,EAAEC,QAAQ,EAAEC,OAAM,QAAS,cAAc;AAC3E,eAAe;EACbC,IAAI,EAAE,OAAO;EAEbC,UAAU,EAAE;IACVL,KAAK;IACLD,IAAI;IACJE;EACF,CAAC;EACDK,IAAIA,CAAA,EAAG;IACL,MAAM;MAAEC;IAAa,IAAIJ,OAAO,EAAE;IAElC,MAAMK,QAAO,GAAID,YAAY,CAAEE,MAAM,IAAK;MACxCZ,KAAK,CAACY,MAAM,CAACC,KAAK,EAAED,MAAM,CAACE,QAAQ,EAChCC,IAAI,CAAEC,IAAI,IAAK;QACdC,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEC,IAAI,CAACC,SAAS,CAACJ,IAAI,CAAC,CAAC;QAClDC,YAAY,CAACC,OAAO,CAAC,OAAO,EAACG,MAAM,CAACC,KAAK,CAACC,KAAK;QAC/CzB,OAAO,CAAC0B,MAAM,CAACR,IAAI,CAAClB,OAAO,CAAC;QAC5BC,MAAM,CAAC0B,OAAO,CAAC;UAAEC,IAAI,EAAE;QAAI,CAAC,CAAC;MAC/B,CAAC,EACAC,KAAK,CAAEC,CAAC,IAAM,IAAI,CAACC,OAAM,GAAI,gCAAiC,CAAC;IACpE,CAAC,CAAC;IACF,MAAM;MAAEC,KAAK,EAAEjB,KAAK;MAAEkB,YAAY,EAAEC;IAAW,IAAI3B,QAAQ,CACzD,OAAO,EAEPJ,GAAG,CAACgC,MAAM,EAAE,CAACpB,KAAK,EAAE,CAACqB,QAAQ,EAAC,CAC/B;IACD,MAAM;MAAEJ,KAAK,EAAEhB,QAAQ;MAAEiB,YAAY,EAAEI;IAAc,IAAI9B,QAAQ,CAC/D,UAAU,EAEVJ,GAAG,CAACgC,MAAM,EAAE,CAACG,GAAG,CAAC,CAAC,CAAC,CAACF,QAAQ,EAAC,CAC9B;IAED,OAAO;MACLL,OAAO,EAAE,EAAE;MACXhB,KAAK;MACLC,QAAQ;MACRqB,aAAa;MACbH,UAAU;MACVtB,YAAY;MACZC;IACF,CAAC;EACH,CAAC;EACD0B,OAAOA,CAAA,EAAG,CAAC,CAAC;EACZC,OAAO,EAAE;IACP;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;EAAA;AAGJ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}