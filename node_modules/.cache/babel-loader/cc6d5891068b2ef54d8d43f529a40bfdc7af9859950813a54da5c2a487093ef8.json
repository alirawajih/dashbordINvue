{"ast":null,"code":"import { ability } from \"@/ability/defineApilty\";\nimport router from \"@/router\";\nimport store from \"../../store\";\nimport { login } from \"@/jsc/loginuser\";\nimport { Store } from \"vuex\";\nimport * as yup from \"yup\";\nimport notfound from \"../../components/notfound/notfound.vue\";\nimport { Form, Field, ErrorMessage, useField, useForm } from \"vee-validate\";\nexport default {\n  name: \"login\",\n  props: {\n    name\n  },\n  components: {\n    Field,\n    Form,\n    ErrorMessage,\n    notfound\n  },\n  data() {\n    let dash = true;\n    const {\n      handleSubmit\n    } = useForm();\n    const onSubmit = handleSubmit(values => {\n      login(values.email, values.password, this.name).then(user => {\n        localStorage.setItem(\"user\", JSON.stringify(user));\n        ability.update(user.ability);\n        // router.replace({ path: \"/\" });\n        if (this.name == \"DashbordOne\") {\n          router.replace({\n            name: \"apexchart\"\n          });\n        }\n        if (this.name == \"DashbordTow\") {\n          router.replace({\n            path: \"/\"\n          });\n        }\n      }).catch(e => this.message = \"email or password is incorrect\");\n    });\n    const {\n      value: email,\n      errorMessage: erroremail\n    } = useField(\"email\", yup.string().email().required());\n    const {\n      value: password,\n      errorMessage: errorpassword\n    } = useField(\"password\", yup.string().min(3).required());\n    return {\n      message: \"\",\n      email,\n      password,\n      errorpassword,\n      erroremail,\n      handleSubmit,\n      onSubmit,\n      dash\n    };\n  },\n  created() {\n    if (!store.state.dashbordname.filter(i => i == this.name).length) {\n      this.dash = false;\n    }\n  },\n  methods: {\n    async submit() {\n      // console.log(handleSubmit)\n      // login(this.email, this.password)\n      //   .then((user) => {\n      //     localStorage.setItem(\"user\", JSON.stringify(user));\n      //     // updateability(user.position)\n      //     ability.update(user.ability);\n      //     router.replace({ path: \"/\" });\n      //     // timeout()\n      //   })\n      //   .catch((e) => (this.message = \"email or password is incorrect\"));\n      ///////////////////\n      // this.$store\n      //   .dispatch(\"login\", this.user)\n      //   .then((user) => {\n      //     localStorage.setItem(\"user\", JSON.stringify(user));\n      //     // updateability(user.position)\n      //     ability.update(user.ability);\n      //     router.replace({ path: \"/\" });\n      //     // timeout()\n      //   })\n      //   .catch((e) => (this.message = \"email or password is incorrect\"));\n      /////////////////////\n      // this.$store.dispatch(\"login\", this.user)\n      // if(this.$store.state.auth){\n      //   localStorage.setItem('user' ,JSON.stringify(this.$store.state.auth))\n      //   router.replace({name:\"ecommerce\"})\n      // }else{\n      //   this.message = \"email or password is incorrect\"\n      // }\n    },\n    login() {}\n    // validateEmail(value) {\n    //   if (!value) {\n    //     return \"This field is required\";\n    //   }\n    //   const regex = /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i;\n    //   if (!regex.test(value)) {\n    //     return \"This field must be a valid email\";\n    //   }\n\n    //   return true;\n    // },\n  }\n};","map":{"version":3,"names":["ability","router","store","login","Store","yup","notfound","Form","Field","ErrorMessage","useField","useForm","name","props","components","data","dash","handleSubmit","onSubmit","values","email","password","then","user","localStorage","setItem","JSON","stringify","update","replace","path","catch","e","message","value","errorMessage","erroremail","string","required","errorpassword","min","created","state","dashbordname","filter","i","length","methods","submit"],"sources":["/var/www/html/project/Dash_Vuexy-master/src/views/login/login.vue"],"sourcesContent":["<template>\n  <div class=\"homebutton\">\n        <router-link :to=\"{ name: 'homePage' }\">\n          <vue-feather type=\"home\"></vue-feather>\n        </router-link>\n        \n        \n      </div>\n  <div class=\"loginpage row m-0 p-5\" v-if=\"dash\">\n    \n    <div class=\"col-xl-9 col-md-12 col-sm-12 d-flex justify-content-center\">\n      \n      <img\n        src=\"../../../src/assets/images/pages/not-authorized-dark.svg\"\n        class=\"img-fluid\"\n        alt=\"...\"\n      />\n    </div>\n    <div class=\"col-xl-3 col-md-12 col-sm-12 login\">\n      <main class=\"LoginForm\">\n        <form @submit.prevent=\"onSubmit\">\n          <div class=\"alert alert-danger\" role=\"alert\" v-if=\"message\">\n            {{ message }}\n          </div>\n\n          <h1 class=\"h5 mb-3 fw-normal text-dark\">log in to {{ name }}</h1>\n          <label for=\"email\">Email address</label>\n          <div   >\n            <input\n              v-model=\"email\"\n              name=\"email\"\n              id=\"email\"\n              class=\"form-control\"\n              type=\"email\"\n            />\n            <span class=\"p-error text-danger\"> {{ erroremail }}</span>\n          </div>\n          <label for=\"Password\">Password</label>\n          <div   >\n            <input\n              v-model=\"password\"\n              name=\"password\"\n              id=\"password\"\n              class=\"form-control\"\n              type=\"password\"\n            />\n            <span class=\"p-error text-danger\"> {{ errorpassword }}</span>\n          </div>\n\n          <div class=\"checkbox mb-3 text-dark\">\n            <label>\n              <input type=\"checkbox\" name=\"checkbox\" value=\"remember-me\" />\n              Remember me\n            </label>\n          </div>\n          <button class=\"w-100 btn btn-lg btn-primary\" type=\"submit\">\n            Sign in\n          </button>\n        </form>\n      </main>\n    </div>\n  </div>\n  <div class=\"\"  v-else>\n    <notfound/>\n  </div>\n</template>\n<script>\nimport { ability } from \"@/ability/defineApilty\";\nimport router from \"@/router\";\nimport store from \"../../store\";\nimport { login } from \"@/jsc/loginuser\";\nimport { Store } from \"vuex\";\nimport * as yup from \"yup\";\nimport notfound from \"../../components/notfound/notfound.vue\";\nimport { Form, Field, ErrorMessage, useField, useForm } from \"vee-validate\";\nexport default {\n  name: \"login\",\n  props: { name },\n  components: {\n    Field,\n    Form,\n    ErrorMessage,notfound\n  },\n  data() {\n    let dash = true;\n    const { handleSubmit } = useForm();\n\n    const onSubmit = handleSubmit((values) => {\n      login(values.email, values.password, this.name)\n        .then((user) => {\n          localStorage.setItem(\"user\", JSON.stringify(user));\n          ability.update(user.ability);\n          // router.replace({ path: \"/\" });\n          if (this.name == \"DashbordOne\") {\n            router.replace({ name: \"apexchart\" });\n          }\n          if (this.name == \"DashbordTow\") {\n            router.replace({ path: \"/\" });\n          }\n        })\n        .catch((e) => (this.message = \"email or password is incorrect\"));\n    });\n    const { value: email, errorMessage: erroremail } = useField(\n      \"email\",\n\n      yup.string().email().required()\n    );\n    const { value: password, errorMessage: errorpassword } = useField(\n      \"password\",\n\n      yup.string().min(3).required()\n    );\n\n    return {\n      message: \"\",\n      email,\n      password,\n      errorpassword,\n      erroremail,\n      handleSubmit,\n      onSubmit,\n      dash\n    };\n  },\n  created() {\n    if(!store.state.dashbordname.filter(i => i== this.name).length){\n      this.dash = false\n    }\n  },\n  methods: {\n    async submit() {\n      // console.log(handleSubmit)\n      // login(this.email, this.password)\n      //   .then((user) => {\n      //     localStorage.setItem(\"user\", JSON.stringify(user));\n      //     // updateability(user.position)\n      //     ability.update(user.ability);\n      //     router.replace({ path: \"/\" });\n      //     // timeout()\n      //   })\n      //   .catch((e) => (this.message = \"email or password is incorrect\"));\n      ///////////////////\n      // this.$store\n      //   .dispatch(\"login\", this.user)\n      //   .then((user) => {\n      //     localStorage.setItem(\"user\", JSON.stringify(user));\n      //     // updateability(user.position)\n      //     ability.update(user.ability);\n      //     router.replace({ path: \"/\" });\n      //     // timeout()\n      //   })\n      //   .catch((e) => (this.message = \"email or password is incorrect\"));\n      /////////////////////\n      // this.$store.dispatch(\"login\", this.user)\n      // if(this.$store.state.auth){\n      //   localStorage.setItem('user' ,JSON.stringify(this.$store.state.auth))\n      //   router.replace({name:\"ecommerce\"})\n      // }else{\n      //   this.message = \"email or password is incorrect\"\n      // }\n    },\n    login() {},\n    // validateEmail(value) {\n    //   if (!value) {\n    //     return \"This field is required\";\n    //   }\n    //   const regex = /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i;\n    //   if (!regex.test(value)) {\n    //     return \"This field must be a valid email\";\n    //   }\n\n    //   return true;\n    // },\n  },\n};\n</script>\n<style scoped>\n.login {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.LoginForm {\n  margin-left: 7%;\n  margin-top: 15%;\n  width: 100%;\n}\n@media screen and (max-width: 1560px) {\n  .LoginForm {\n    width: 700px;\n    margin-top: 10%;\n  }\n}\n.loginpage {\n  /* background: rgba(128, 128, 128, 0.484); */\n  min-height: 100vh;\n}\na {\n  color: black;\n}\n.homebutton{\n  position: absolute;\n  display: inline-block;\n  padding: 30px;\n}\n</style>"],"mappings":"AAmEA,SAASA,OAAM,QAAS,wBAAwB;AAChD,OAAOC,MAAK,MAAO,UAAU;AAC7B,OAAOC,KAAI,MAAO,aAAa;AAC/B,SAASC,KAAI,QAAS,iBAAiB;AACvC,SAASC,KAAI,QAAS,MAAM;AAC5B,OAAO,KAAKC,GAAE,MAAO,KAAK;AAC1B,OAAOC,QAAO,MAAO,wCAAwC;AAC7D,SAASC,IAAI,EAAEC,KAAK,EAAEC,YAAY,EAAEC,QAAQ,EAAEC,OAAM,QAAS,cAAc;AAC3E,eAAe;EACbC,IAAI,EAAE,OAAO;EACbC,KAAK,EAAE;IAAED;EAAK,CAAC;EACfE,UAAU,EAAE;IACVN,KAAK;IACLD,IAAI;IACJE,YAAY;IAACH;EACf,CAAC;EACDS,IAAIA,CAAA,EAAG;IACL,IAAIC,IAAG,GAAI,IAAI;IACf,MAAM;MAAEC;IAAa,IAAIN,OAAO,EAAE;IAElC,MAAMO,QAAO,GAAID,YAAY,CAAEE,MAAM,IAAK;MACxChB,KAAK,CAACgB,MAAM,CAACC,KAAK,EAAED,MAAM,CAACE,QAAQ,EAAE,IAAI,CAACT,IAAI,EAC3CU,IAAI,CAAEC,IAAI,IAAK;QACdC,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEC,IAAI,CAACC,SAAS,CAACJ,IAAI,CAAC,CAAC;QAClDvB,OAAO,CAAC4B,MAAM,CAACL,IAAI,CAACvB,OAAO,CAAC;QAC5B;QACA,IAAI,IAAI,CAACY,IAAG,IAAK,aAAa,EAAE;UAC9BX,MAAM,CAAC4B,OAAO,CAAC;YAAEjB,IAAI,EAAE;UAAY,CAAC,CAAC;QACvC;QACA,IAAI,IAAI,CAACA,IAAG,IAAK,aAAa,EAAE;UAC9BX,MAAM,CAAC4B,OAAO,CAAC;YAAEC,IAAI,EAAE;UAAI,CAAC,CAAC;QAC/B;MACF,CAAC,EACAC,KAAK,CAAEC,CAAC,IAAM,IAAI,CAACC,OAAM,GAAI,gCAAiC,CAAC;IACpE,CAAC,CAAC;IACF,MAAM;MAAEC,KAAK,EAAEd,KAAK;MAAEe,YAAY,EAAEC;IAAW,IAAI1B,QAAQ,CACzD,OAAO,EAEPL,GAAG,CAACgC,MAAM,EAAE,CAACjB,KAAK,EAAE,CAACkB,QAAQ,EAAC,CAC/B;IACD,MAAM;MAAEJ,KAAK,EAAEb,QAAQ;MAAEc,YAAY,EAAEI;IAAc,IAAI7B,QAAQ,CAC/D,UAAU,EAEVL,GAAG,CAACgC,MAAM,EAAE,CAACG,GAAG,CAAC,CAAC,CAAC,CAACF,QAAQ,EAAC,CAC9B;IAED,OAAO;MACLL,OAAO,EAAE,EAAE;MACXb,KAAK;MACLC,QAAQ;MACRkB,aAAa;MACbH,UAAU;MACVnB,YAAY;MACZC,QAAQ;MACRF;IACF,CAAC;EACH,CAAC;EACDyB,OAAOA,CAAA,EAAG;IACR,IAAG,CAACvC,KAAK,CAACwC,KAAK,CAACC,YAAY,CAACC,MAAM,CAACC,CAAA,IAAKA,CAAC,IAAG,IAAI,CAACjC,IAAI,CAAC,CAACkC,MAAM,EAAC;MAC7D,IAAI,CAAC9B,IAAG,GAAI,KAAI;IAClB;EACF,CAAC;EACD+B,OAAO,EAAE;IACP,MAAMC,MAAMA,CAAA,EAAG;MACb;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IAAA,CACD;IACD7C,KAAKA,CAAA,EAAG,CAAC;IACT;IACA;IACA;IACA;IACA;IACA;IACA;IACA;;IAEA;IACA;EACF;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}