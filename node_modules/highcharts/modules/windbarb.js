/*
 Highcharts JS v11.1.0 (2023-09-05)

 Wind barb series module

 (c) 2010-2021 Torstein Honsi

 License: www.highcharts.com/license
*/
'use strict';(function(a){"object"===typeof module&&module.exports?(a["default"]=a,module.exports=a):"function"===typeof define&&define.amd?define("highcharts/modules/windbarb",["highcharts"],function(f){a(f);a.Highcharts=f;return a}):a("undefined"!==typeof Highcharts?Highcharts:void 0)})(function(a){function f(a,g,q,f){a.hasOwnProperty(g)||(a[g]=f.apply(null,q),"function"===typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:g,module:a[g]}})))}a=a?a._modules:
{};f(a,"Extensions/DataGrouping/ApproximationRegistry.js",[],function(){return{}});f(a,"Series/OnSeriesComposition.js",[a["Series/Column/ColumnSeries.js"],a["Core/Series/Series.js"],a["Core/Utilities.js"]],function(a,g,f){const {prototype:q}=a,{prototype:r}=g,{defined:v,stableSort:A}=f;var p;(function(a){function g(a){return r.getPlotBox.call(this.options.onSeries&&this.chart.get(this.options.onSeries)||this,a)}function p(){var a,g;q.translate.apply(this);const n=this;var e=n.options,d=n.chart;const c=
n.points;var b=e.onSeries;const f=(b=b&&d.get(b))&&b.options.step,x=b&&b.points,p=d.inverted,l=n.xAxis,r=n.yAxis;d=c.length-1;let y;e=e.onKey||"y";let u=x&&x.length,w=0;let B;var m;if(b&&b.visible&&u){w=(b.pointXOffset||0)+(b.barW||0)/2;var h=b.currentDataGrouping;B=x[u-1].x+(h?h.totalRange:0);A(c,(b,c)=>b.x-c.x);for(e="plot"+e[0].toUpperCase()+e.substr(1);u--&&c[d];){var k=x[u];h=c[d];h.y=k.y;if(k.x<=h.x&&"undefined"!==typeof k[e]){if(h.x<=B&&(h.plotY=k[e],k.x<h.x&&!f&&(m=x[u+1])&&"undefined"!==
typeof m[e]))if(v(h.plotX)&&b.is("spline")){const b=[k.plotX||0,k.plotY||0],c=[m.plotX||0,m.plotY||0],n=(null===(a=k.controlPoints)||void 0===a?void 0:a.high)||b,e=(null===(g=m.controlPoints)||void 0===g?void 0:g.low)||c;k=(a,d)=>Math.pow(1-a,3)*b[d]+3*(1-a)*(1-a)*a*n[d]+3*(1-a)*a*a*e[d]+a*a*a*c[d];m=0;var z=1;let d;for(let b=0;100>b;b++){const b=(m+z)/2,a=k(b,0);if(null===a)break;if(.25>Math.abs(a-h.plotX)){d=b;break}a<h.plotX?m=b:z=b}v(d)&&(h.plotY=k(d,1),h.y=r.toValue(h.plotY,!0))}else z=(h.x-
k.x)/(m.x-k.x),h.plotY+=z*(m[e]-k[e]),h.y+=z*(m.y-k.y);d--;u++;if(0>d)break}}}c.forEach((b,a)=>{let d;b.plotX+=w;if("undefined"===typeof b.plotY||p)0<=b.plotX&&b.plotX<=l.len?p?(b.plotY=l.translate(b.x,0,1,0,1),b.plotX=v(b.y)?r.translate(b.y,0,0,0,1):0):b.plotY=(l.opposite?0:n.yAxis.len)+l.offset:b.shapeArgs={};(y=c[a-1])&&y.plotX===b.plotX&&("undefined"===typeof y.stackIndex&&(y.stackIndex=0),d=y.stackIndex+1);b.stackIndex=d});this.onSeries=b}const l=[];a.compose=function(a){if(f.pushUnique(l,a)){const f=
a.prototype;f.getPlotBox=g;f.translate=p}return a};a.getPlotBox=g;a.translate=p})(p||(p={}));return p});f(a,"Series/Windbarb/WindbarbPoint.js",[a["Core/Utilities.js"],a["Series/Column/ColumnSeries.js"]],function(a,f){const {isNumber:g}=a;class l extends f.prototype.pointClass{constructor(){super(...arguments);this.series=this.options=this.direction=this.beaufortLevel=this.beaufort=void 0}isValid(){return g(this.value)&&0<=this.value}}return l});f(a,"Series/Windbarb/WindbarbSeries.js",[a["Core/Animation/AnimationUtilities.js"],
a["Extensions/DataGrouping/ApproximationRegistry.js"],a["Core/Globals.js"],a["Series/OnSeriesComposition.js"],a["Core/Series/SeriesRegistry.js"],a["Core/Utilities.js"],a["Series/Windbarb/WindbarbPoint.js"]],function(a,f,q,l,r,v,C){const {animObject:g}=a,{series:A,seriesTypes:{column:w}}=r,{extend:E,merge:F,pick:D}=v;class t extends w{constructor(){super(...arguments);this.points=this.options=this.data=void 0}static registerApproximation(){f.windbarb||(f.windbarb=function(a,e){let d=0,c=0,b,n=a.length;
for(b=0;b<n;b++)d+=a[b]*Math.cos(e[b]*q.deg2rad),c+=a[b]*Math.sin(e[b]*q.deg2rad);return[a.reduce(function(b,a){return b+a},0)/a.length,Math.atan2(c,d)/q.deg2rad]})}init(a,e){t.registerApproximation();A.prototype.init.call(this,a,e)}pointAttribs(a,e){let d=this.options;a=a.color||this.color;let c=this.options.lineWidth;e&&(a=d.states[e].color||a,c=(d.states[e].lineWidth||c)+(d.states[e].lineWidthPlus||0));return{stroke:a,"stroke-width":c}}windArrow(a){let e=1.943844*a.value,d,c=this.options.vectorLength/
20,b=-10;if(a.isNull)return[];if(0===a.beaufortLevel)return this.chart.renderer.symbols.circle(-10*c,-10*c,20*c,20*c);a=[["M",0,7*c],["L",-1.5*c,7*c],["L",0,10*c],["L",1.5*c,7*c],["L",0,7*c],["L",0,-10*c]];d=(e-e%50)/50;if(0<d)for(;d--;)a.push(-10===b?["L",0,b*c]:["M",0,b*c],["L",5*c,b*c+2],["L",0,b*c+4]),e-=50,b+=7;d=(e-e%10)/10;if(0<d)for(;d--;)a.push(-10===b?["L",0,b*c]:["M",0,b*c],["L",7*c,b*c]),e-=10,b+=3;d=(e-e%5)/5;if(0<d)for(;d--;)a.push(-10===b?["L",0,b*c]:["M",0,b*c],["L",4*c,b*c]),e-=5,
b+=3;return a}drawPoints(){const a=this.chart,e=this.yAxis,d=a.inverted,c=this.options.vectorLength/2;this.points.forEach(function(b){const f=b.plotX,g=b.plotY;!1===this.options.clip||a.isInsidePlot(f,0)?(b.graphic||(b.graphic=this.chart.renderer.path().add(this.markerGroup).addClass("highcharts-point highcharts-color-"+D(b.colorIndex,b.series.colorIndex))),b.graphic.attr({d:this.windArrow(b),translateX:f+this.options.xOffset,translateY:g+this.options.yOffset,rotation:b.direction}),this.chart.styledMode||
b.graphic.attr(this.pointAttribs(b))):b.graphic&&(b.graphic=b.graphic.destroy());b.tooltipPos=[f+this.options.xOffset+(d&&!this.onSeries?c:0),g+this.options.yOffset-(d?0:c+e.pos-a.plotTop)]},this)}animate(a){a?this.markerGroup.attr({opacity:.01}):this.markerGroup.animate({opacity:1},g(this.options.animation))}markerAttribs(){return{}}getExtremes(){return{}}shouldShowTooltip(a,e,d={}){d.ignoreX=this.chart.inverted;d.ignoreY=!d.ignoreX;return super.shouldShowTooltip(a,e,d)}}t.defaultOptions=F(w.defaultOptions,
{dataGrouping:{enabled:!0,approximation:"windbarb",groupPixelWidth:30},lineWidth:2,onSeries:null,states:{hover:{lineWidthPlus:0}},tooltip:{pointFormat:'<span style="color:{point.color}">\u25cf</span> {series.name}: <b>{point.value}</b> ({point.beaufort})<br/>'},vectorLength:20,colorKey:"value",yOffset:-20,xOffset:0});l.compose(t);E(t.prototype,{beaufortFloor:[0,.3,1.6,3.4,5.5,8,10.8,13.9,17.2,20.8,24.5,28.5,32.7],beaufortName:"Calm;Light air;Light breeze;Gentle breeze;Moderate breeze;Fresh breeze;Strong breeze;Near gale;Gale;Strong gale;Storm;Violent storm;Hurricane".split(";"),
invertible:!1,parallelArrays:["x","value","direction"],pointArrayMap:["value","direction"],pointClass:C,trackerGroups:["markerGroup"],translate:function(){const a=this.beaufortFloor,e=this.beaufortName;l.translate.call(this);this.points.forEach(function(d){let c=0;for(;c<a.length&&!(a[c]>d.value);c++);d.beaufortLevel=c-1;d.beaufort=e[c-1]})}});t.registerApproximation();r.registerSeriesType("windbarb",t);"";return t});f(a,"masters/modules/windbarb.src.js",[],function(){})});
//# sourceMappingURL=windbarb.js.map