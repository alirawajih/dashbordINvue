/*
 Highcharts JS v11.1.0 (2023-09-05)

 (c) 2009-2022

 License: www.highcharts.com/license
*/
'use strict';(function(b){"object"===typeof module&&module.exports?(b["default"]=b,module.exports=b):"function"===typeof define&&define.amd?define("highcharts/modules/geoheatmap",["highcharts"],function(k){b(k);b.Highcharts=k;return b}):b("undefined"!==typeof Highcharts?Highcharts:void 0)})(function(b){function k(b,d,u,m){b.hasOwnProperty(d)||(b[d]=m.apply(null,u),"function"===typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:d,module:b[d]}})))}b=b?b._modules:
{};k(b,"Series/GeoHeatmap/GeoHeatmapPoint.js",[b["Core/Utilities.js"],b["Core/Series/SeriesRegistry.js"]],function(b,d){var u=this&&this.__extends||function(){function b(a,c){b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,c){b.__proto__=c}||function(b,c){for(var a in c)Object.prototype.hasOwnProperty.call(c,a)&&(b[a]=c[a])};return b(a,c)}return function(a,c){function h(){this.constructor=a}if("function"!==typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+
" is not a constructor or null");b(a,c);a.prototype=null===c?Object.create(c):(h.prototype=c.prototype,new h)}}(),m=b.isNumber;return function(b){function a(){var c=null!==b&&b.apply(this,arguments)||this;c.lat=void 0;c.lon=void 0;c.options=void 0;c.series=void 0;return c}u(a,b);a.prototype.applyOptions=function(c,a){c=b.prototype.applyOptions.call(this,c,a);var h=c.options;a=h.lat;var d=h.lon;if(m(d)&&m(a)){var p=this.series.options;h=p.colsize;h=void 0===h?1:h;p=p.rowsize;p=void 0===p?1:p;d-=h/
2;a-=p/2;c.geometry=c.options.geometry={type:"Polygon",coordinates:[[[d,a],[d+h,a],[d+h,a+p],[d,a+p],[d,a]]]}}return c};return a}(d.seriesTypes.map.prototype.pointClass)});k(b,"Series/InterpolationUtilities.js",[b["Core/Globals.js"],b["Core/Utilities.js"]],function(b,d){var u=b.doc,m=d.defined,k=d.pick;return{colorFromPoint:function(b,c){var a=c.series.colorAxis;return a?(a=a.toColor(b||0,c).split(")")[0].split("(")[1].split(",").map(function(a){return k(parseFloat(a),parseInt(a,10))}),a[3]=255*k(a[3],
1),m(b)&&c.visible||(a[3]=0),a):[0,0,0,0]},getContext:function(a){var b=a.canvas,d=a.context;if(b&&d)d.clearRect(0,0,b.width,b.height);else return a.canvas=u.createElement("canvas"),a.context=a.canvas.getContext("2d",{willReadFrequently:!0})||void 0,a.context;return d}}});k(b,"Series/GeoHeatmap/GeoHeatmapSeries.js",[b["Core/Animation/AnimationUtilities.js"],b["Series/GeoHeatmap/GeoHeatmapPoint.js"],b["Core/Globals.js"],b["Series/InterpolationUtilities.js"],b["Core/Series/SeriesRegistry.js"],b["Core/Utilities.js"]],
function(b,d,k,m,z,a){function c(b){return b-360*Math.floor((b+180)/360)}var h=this&&this.__extends||function(){function b(a,l){b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,a){b.__proto__=a}||function(b,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(b[l]=a[l])};return b(a,l)}return function(a,l){function c(){this.constructor=a}if("function"!==typeof l&&null!==l)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");b(a,l);a.prototype=
null===l?Object.create(l):(c.prototype=l.prototype,new c)}}(),u=b.animObject,H=b.stop;b=k.noop;var p=m.colorFromPoint,I=m.getContext,w=z.seriesTypes.map;m=a.addEvent;k=a.extend;var C=a.isNumber,A=a.isObject,x=a.merge,B=a.pick;a=function(b){function a(){var a=null!==b&&b.apply(this,arguments)||this;a.options=void 0;a.data=void 0;a.points=void 0;a.canvas=void 0;a.context=void 0;a.isDirtyCanvas=!0;return a}h(a,b);a.prototype.update=function(){this.options=x(this.options,arguments[0]);this.getInterpolation().enabled&&
(this.isDirtyCanvas=!0,this.points.forEach(function(a){a.graphic&&(a.graphic.destroy(),delete a.graphic)}));b.prototype.update.apply(this,arguments)};a.prototype.translate=function(){this.getInterpolation().enabled&&this.image&&!this.isDirty&&!this.isDirtyData||b.prototype.translate.apply(this,arguments)};a.prototype.getInterpolation=function(){return A(this.options.interpolation)?this.options.interpolation:{blur:1,enabled:this.options.interpolation}};a.prototype.drawPoints=function(){var a=this.chart.mapView,
c=this.options;if(this.getInterpolation().enabled&&a&&this.bounds){var q=this.context||I(this),e=this.canvas,f=this.colorAxis,d=this.image,k=this.chart,t=this.points;c=[B(c.colsize,1),B(c.rowsize,1)];var h=c[0],m=c[1];c=a.projectedUnitsToPixels({x:this.bounds.x1,y:this.bounds.y2});var v=a.projectedUnitsToPixels({x:this.bounds.x2,y:this.bounds.y1});if(e&&q&&f&&c&&v){var n={x:c.x,y:c.y,width:v.x-c.x,height:v.y-c.y};if(this.isDirtyCanvas||this.isDirtyData||"Orthographic"===a.projection.options.name){this.isDirtyCanvas=
!0;f=e.width=~~(360/h)+1;c=e.height=~~(180/m)+1;v=new Uint8ClampedArray(f*c*4);this.directTouch=!1;for(var g=0;g<t.length;g++){var r=t[g],z=new Uint8ClampedArray(p(r.value,r)),y=r.options;r=y.lon;y=y.lat;C(r)&&C(y)&&v.set(z,4*Math.ceil(f*(c-1-(y+90)/m)+(r+180)/h))}t=this.getInterpolation().blur;t=0===t?1:11*t;m=~~(f*t);g=~~(c*t);t=~~n.width;h=~~n.height;f=new ImageData(v,f,c);e.width=m;e.height=g;q.putImageData(f,0,0);q.globalCompositeOperation="copy";q.drawImage(e,0,0,f.width,f.height,0,0,e.width,
e.height);f=q.getImageData(0,0,e.width,e.height);a=this.getProjectedImageData(a,t,h,f,e,n.x,n.y);a=new ImageData(a,t,h);q.globalCompositeOperation="copy";e.width=t;e.height=h;q.putImageData(a,0,0)}if(d)if(k.renderer.globalAnimation&&k.hasRendered){var w=Number(d.attr("x")),D=Number(d.attr("y")),E=Number(d.attr("width")),F=Number(d.attr("height")),A=function(a,b){d.attr({x:w+(n.x-w)*b.pos,y:D+(n.y-D)*b.pos,width:E+(n.width-E)*b.pos,height:F+(n.height-F)*b.pos})};q=x(u(k.renderer.globalAnimation));
var G=q.step;q.step=function(){G&&G.apply(this,arguments);A.apply(this,arguments)};d.attr(x({animator:0},this.isDirtyCanvas?{href:e.toDataURL("image/png",1)}:void 0)).animate({animator:1},q)}else H(d),d.attr(x(n,this.isDirtyCanvas?{href:e.toDataURL("image/png",1)}:void 0));else this.image=k.renderer.image(e.toDataURL("image/png",1)).attr(n).add(this.group);this.isDirtyCanvas=!1}}else b.prototype.drawPoints.apply(this,arguments)};a.prototype.getProjectedImageData=function(a,b,d,e,f,h,k){var l;d=new Uint8ClampedArray(b*
d*4);var q=B(null===(l=a.projection.options.rotation)||void 0===l?void 0:l[0],0);l=f.width/360;for(var m=-1*f.height/180,p=-1,n=0;n<d.length;n+=4){var g=n/4%b;0===g&&p++;if(g=a.pixelsToLonLat({x:h+g,y:k+p})){g.lon>-180-q&&g.lon<180-q&&(g.lon=c(g.lon));var r=[g.lon,g.lat];g=r[0]*l+f.width/2;r=r[1]*m+f.height/2;0<=g&&g<=f.width&&0<=r&&r<=f.height&&(g=Math.floor(r)*f.width*4+4*Math.round(g),d[n]=e.data[g],d[n+1]=e.data[g+1],d[n+2]=e.data[g+2],d[n+3]=e.data[g+3])}}return d};a.prototype.searchPoint=function(a,
b){var d=this.chart,e=d.mapView;if(e&&this.bounds&&this.image&&d.tooltip&&d.tooltip.options.enabled)if(!1===d.pointer.hasDragged&&(.01>=+this.image.attr("animator")||.99<=+this.image.attr("animator"))){var f=e.projectedUnitsToPixels({x:this.bounds.x1,y:this.bounds.y2});e=e.projectedUnitsToPixels({x:this.bounds.x2,y:this.bounds.y1});d.pointer.normalize(a);if(a.lon&&a.lat&&f&&e&&a.chartX-d.plotLeft>f.x&&a.chartX-d.plotLeft<e.x&&a.chartY-d.plotTop>f.y&&a.chartY-d.plotTop<e.y)return this.searchKDTree({clientX:a.chartX,
lon:c(a.lon),lat:a.lat},b,a)}else d.tooltip.destroy()};a.defaultOptions=x(w.defaultOptions,{nullColor:"transparent",tooltip:{pointFormat:"Lat: {point.lat}, Lon: {point.lon}, Value: {point.value}<br/>"},borderWidth:0,colsize:1,rowsize:1,stickyTracking:!0,interpolation:{enabled:!1,blur:1}});return a}(w);m(a,"afterDataClassLegendClick",function(){this.isDirtyCanvas=!0;this.drawPoints()});k(a.prototype,{type:"geoheatmap",applyJitter:b,pointClass:d,pointArrayMap:["lon","lat","value"],kdAxisArray:["lon",
"lat"]});z.registerSeriesType("geoheatmap",a);"";return a});k(b,"masters/modules/geoheatmap.src.js",[],function(){})});
//# sourceMappingURL=geoheatmap.js.map