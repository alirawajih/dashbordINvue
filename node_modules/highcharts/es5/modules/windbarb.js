/*
 Highcharts JS v11.1.0 (2023-09-05)

 Wind barb series module

 (c) 2010-2021 Torstein Honsi

 License: www.highcharts.com/license
*/
'use strict';(function(a){"object"===typeof module&&module.exports?(a["default"]=a,module.exports=a):"function"===typeof define&&define.amd?define("highcharts/modules/windbarb",["highcharts"],function(g){a(g);a.Highcharts=g;return a}):a("undefined"!==typeof Highcharts?Highcharts:void 0)})(function(a){function g(a,d,k,g){a.hasOwnProperty(d)||(a[d]=g.apply(null,k),"function"===typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:d,module:a[d]}})))}a=a?a._modules:
{};g(a,"Extensions/DataGrouping/ApproximationRegistry.js",[],function(){return{}});g(a,"Series/OnSeriesComposition.js",[a["Series/Column/ColumnSeries.js"],a["Core/Series/Series.js"],a["Core/Utilities.js"]],function(a,d,k){var g=a.prototype,p=d.prototype,b=k.defined,h=k.stableSort,q;(function(a){function q(a){return p.getPlotBox.call(this.options.onSeries&&this.chart.get(this.options.onSeries)||this,a)}function d(){var a,C;g.translate.apply(this);var u=this,c=u.options,l=u.chart,e=u.points,B=c.onSeries,
f=B&&l.get(B),q=f&&f.options.step,d=f&&f.points,p=l.inverted,k=u.xAxis,A=u.yAxis,x=e.length-1,m,r,v=c.onKey||"y",y=d&&d.length,t=0,n,w,D;if(f&&f.visible&&y){t=(f.pointXOffset||0)+(f.barW||0)/2;c=f.currentDataGrouping;var E=d[y-1].x+(c?c.totalRange:0);h(e,function(c,e){return c.x-e.x});v="plot"+v[0].toUpperCase()+v.substr(1);for(c=function(){n=d[y];m=e[x];m.y=n.y;if(n.x<=m.x&&"undefined"!==typeof n[v]){if(m.x<=E&&(m.plotY=n[v],n.x<m.x&&!q&&(w=d[y+1])&&"undefined"!==typeof w[v]))if(b(m.plotX)&&f.is("spline")){for(var c=
[n.plotX||0,n.plotY||0],l=[w.plotX||0,w.plotY||0],B=(null===(a=n.controlPoints)||void 0===a?void 0:a.high)||c,u=(null===(C=w.controlPoints)||void 0===C?void 0:C.low)||l,h=function(e,a){return Math.pow(1-e,3)*c[a]+3*(1-e)*(1-e)*e*B[a]+3*(1-e)*e*e*u[a]+e*e*e*l[a]},k=0,p=1,g=void 0,r=0;100>r;r++){var t=(k+p)/2,z=h(t,0);if(null===z)break;if(.25>Math.abs(z-m.plotX)){g=t;break}z<m.plotX?k=t:p=t}b(g)&&(m.plotY=h(g,1),m.y=A.toValue(m.plotY,!0))}else D=(m.x-n.x)/(w.x-n.x),m.plotY+=D*(w[v]-n[v]),m.y+=D*(w.y-
n.y);x--;y++;if(0>x)return"break"}};y--&&e[x]&&"break"!==c(););}e.forEach(function(c,a){c.plotX+=t;if("undefined"===typeof c.plotY||p)0<=c.plotX&&c.plotX<=k.len?p?(c.plotY=k.translate(c.x,0,1,0,1),c.plotX=b(c.y)?A.translate(c.y,0,0,0,1):0):c.plotY=(k.opposite?0:u.yAxis.len)+k.offset:c.shapeArgs={};if((r=e[a-1])&&r.plotX===c.plotX){"undefined"===typeof r.stackIndex&&(r.stackIndex=0);var f=r.stackIndex+1}c.stackIndex=f});this.onSeries=f}var A=[];a.compose=function(a){if(k.pushUnique(A,a)){var b=a.prototype;
b.getPlotBox=q;b.translate=d}return a};a.getPlotBox=q;a.translate=d})(q||(q={}));return q});g(a,"Series/Windbarb/WindbarbPoint.js",[a["Core/Utilities.js"],a["Series/Column/ColumnSeries.js"]],function(a,d){var k=this&&this.__extends||function(){function a(b,h){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var h in b)Object.prototype.hasOwnProperty.call(b,h)&&(a[h]=b[h])};return a(b,h)}return function(b,h){function d(){this.constructor=b}if("function"!==
typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");a(b,h);b.prototype=null===h?Object.create(h):(d.prototype=h.prototype,new d)}}(),g=a.isNumber;return function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.beaufort=void 0;b.beaufortLevel=void 0;b.direction=void 0;b.options=void 0;b.series=void 0;return b}k(b,a);b.prototype.isValid=function(){return g(this.value)&&0<=this.value};return b}(d.prototype.pointClass)});g(a,"Series/Windbarb/WindbarbSeries.js",
[a["Core/Animation/AnimationUtilities.js"],a["Extensions/DataGrouping/ApproximationRegistry.js"],a["Core/Globals.js"],a["Series/OnSeriesComposition.js"],a["Core/Series/SeriesRegistry.js"],a["Core/Utilities.js"],a["Series/Windbarb/WindbarbPoint.js"]],function(a,d,k,g,p,b,h){var q=this&&this.__extends||function(){function a(b,c){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var e in c)Object.prototype.hasOwnProperty.call(c,e)&&(a[e]=c[e])};
return a(b,c)}return function(b,c){function l(){this.constructor=b}if("function"!==typeof c&&null!==c)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");a(b,c);b.prototype=null===c?Object.create(c):(l.prototype=c.prototype,new l)}}(),t=a.animObject,r=p.series,x=p.seriesTypes.column;a=b.extend;var F=b.merge,z=b.pick;b=function(a){function b(){var c=null!==a&&a.apply(this,arguments)||this;c.data=void 0;c.options=void 0;c.points=void 0;return c}q(b,a);b.registerApproximation=
function(){d.windbarb||(d.windbarb=function(a,b){var c=0,l=0,f,d=a.length;for(f=0;f<d;f++)c+=a[f]*Math.cos(b[f]*k.deg2rad),l+=a[f]*Math.sin(b[f]*k.deg2rad);return[a.reduce(function(a,c){return a+c},0)/a.length,Math.atan2(l,c)/k.deg2rad]})};b.prototype.init=function(a,l){b.registerApproximation();r.prototype.init.call(this,a,l)};b.prototype.pointAttribs=function(a,b){var c=this.options;a=a.color||this.color;var l=this.options.lineWidth;b&&(a=c.states[b].color||a,l=(c.states[b].lineWidth||l)+(c.states[b].lineWidthPlus||
0));return{stroke:a,"stroke-width":l}};b.prototype.windArrow=function(a){var c=1.943844*a.value,b=this.options.vectorLength/20,d=-10;if(a.isNull)return[];if(0===a.beaufortLevel)return this.chart.renderer.symbols.circle(-10*b,-10*b,20*b,20*b);a=[["M",0,7*b],["L",-1.5*b,7*b],["L",0,10*b],["L",1.5*b,7*b],["L",0,7*b],["L",0,-10*b]];var f=(c-c%50)/50;if(0<f)for(;f--;)a.push(-10===d?["L",0,d*b]:["M",0,d*b],["L",5*b,d*b+2],["L",0,d*b+4]),c-=50,d+=7;f=(c-c%10)/10;if(0<f)for(;f--;)a.push(-10===d?["L",0,d*
b]:["M",0,d*b],["L",7*b,d*b]),c-=10,d+=3;f=(c-c%5)/5;if(0<f)for(;f--;)a.push(-10===d?["L",0,d*b]:["M",0,d*b],["L",4*b,d*b]),c-=5,d+=3;return a};b.prototype.drawPoints=function(){var a=this.chart,b=this.yAxis,d=a.inverted,g=this.options.vectorLength/2;this.points.forEach(function(c){var e=c.plotX,f=c.plotY;!1===this.options.clip||a.isInsidePlot(e,0)?(c.graphic||(c.graphic=this.chart.renderer.path().add(this.markerGroup).addClass("highcharts-point highcharts-color-"+z(c.colorIndex,c.series.colorIndex))),
c.graphic.attr({d:this.windArrow(c),translateX:e+this.options.xOffset,translateY:f+this.options.yOffset,rotation:c.direction}),this.chart.styledMode||c.graphic.attr(this.pointAttribs(c))):c.graphic&&(c.graphic=c.graphic.destroy());c.tooltipPos=[e+this.options.xOffset+(d&&!this.onSeries?g:0),f+this.options.yOffset-(d?0:g+b.pos-a.plotTop)]},this)};b.prototype.animate=function(a){a?this.markerGroup.attr({opacity:.01}):this.markerGroup.animate({opacity:1},t(this.options.animation))};b.prototype.markerAttribs=
function(){return{}};b.prototype.getExtremes=function(){return{}};b.prototype.shouldShowTooltip=function(b,d,e){void 0===e&&(e={});e.ignoreX=this.chart.inverted;e.ignoreY=!e.ignoreX;return a.prototype.shouldShowTooltip.call(this,b,d,e)};b.defaultOptions=F(x.defaultOptions,{dataGrouping:{enabled:!0,approximation:"windbarb",groupPixelWidth:30},lineWidth:2,onSeries:null,states:{hover:{lineWidthPlus:0}},tooltip:{pointFormat:'<span style="color:{point.color}">\u25cf</span> {series.name}: <b>{point.value}</b> ({point.beaufort})<br/>'},
vectorLength:20,colorKey:"value",yOffset:-20,xOffset:0});return b}(x);g.compose(b);a(b.prototype,{beaufortFloor:[0,.3,1.6,3.4,5.5,8,10.8,13.9,17.2,20.8,24.5,28.5,32.7],beaufortName:"Calm;Light air;Light breeze;Gentle breeze;Moderate breeze;Fresh breeze;Strong breeze;Near gale;Gale;Strong gale;Storm;Violent storm;Hurricane".split(";"),invertible:!1,parallelArrays:["x","value","direction"],pointArrayMap:["value","direction"],pointClass:h,trackerGroups:["markerGroup"],translate:function(){var a=this.beaufortFloor,
b=this.beaufortName;g.translate.call(this);this.points.forEach(function(c){for(var d=0;d<a.length&&!(a[d]>c.value);d++);c.beaufortLevel=d-1;c.beaufort=b[d-1]})}});b.registerApproximation();p.registerSeriesType("windbarb",b);"";return b});g(a,"masters/modules/windbarb.src.js",[],function(){})});
//# sourceMappingURL=windbarb.js.map