/*
 Highcharts JS v11.1.0 (2023-09-05)

 (c) 2009-2022

 License: www.highcharts.com/license
*/
'use strict';(function(a){"object"===typeof module&&module.exports?(a["default"]=a,module.exports=a):"function"===typeof define&&define.amd?define("highcharts/modules/flowmap",["highcharts"],function(k){a(k);a.Highcharts=k;return a}):a("undefined"!==typeof Highcharts?Highcharts:void 0)})(function(a){function k(a,f,b,k){a.hasOwnProperty(f)||(a[f]=k.apply(null,b),"function"===typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:f,module:a[f]}})))}a=a?a._modules:
{};k(a,"Series/FlowMap/FlowMapPoint.js",[a["Core/Series/SeriesRegistry.js"],a["Core/Utilities.js"]],function(a,f){var b=this&&this.__extends||function(){function a(b,h){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var h in b)Object.prototype.hasOwnProperty.call(b,h)&&(a[h]=b[h])};return a(b,h)}return function(b,h){function f(){this.constructor=b}if("function"!==typeof h&&null!==h)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");
a(b,h);b.prototype=null===h?Object.create(h):(f.prototype=h.prototype,new f)}}(),k=f.pick,B=f.isString,C=f.isNumber;return function(a){function f(){var b=null!==a&&a.apply(this,arguments)||this;b.options=void 0;b.series=void 0;return b}b(f,a);f.prototype.isValid=function(){var a=!(!this.options.to||!this.options.from);[this.options.to,this.options.from].forEach(function(b){a=!!(a&&b&&(B(b)||C(k(b[0],b.lat))&&C(k(b[1],b.lon))))});return a};return f}(a.seriesTypes.mapline.prototype.pointClass)});k(a,
"Series/FlowMap/FlowMapSeries.js",[a["Series/FlowMap/FlowMapPoint.js"],a["Core/Series/SeriesRegistry.js"],a["Core/Utilities.js"]],function(a,f,b){var k=this&&this.__extends||function(){function a(b,c){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,d){c.__proto__=d}||function(c,d){for(var g in d)Object.prototype.hasOwnProperty.call(d,g)&&(c[g]=d[g])};return a(b,c)}return function(b,c){function g(){this.constructor=b}if("function"!==typeof c&&null!==c)throw new TypeError("Class extends value "+
String(c)+" is not a constructor or null");a(b,c);b.prototype=null===c?Object.create(c):(g.prototype=c.prototype,new g)}}(),B=this&&this.__spreadArray||function(a,b,c){if(c||2===arguments.length)for(var g=0,d=b.length,e;g<d;g++)!e&&g in b||(e||(e=Array.prototype.slice.call(b,0,g)),e[g]=b[g]);return a.concat(e||Array.prototype.slice.call(b))},C=f.series.prototype.pointClass,A=f.seriesTypes,J=A.column,h=A.map,E=A.mapline,K=b.addEvent,L=b.arrayMax,M=b.arrayMin,F=b.defined;A=b.extend;var G=b.isArray,
H=b.merge,w=b.pick,I=b.relativeLength;b=function(b){function a(){var c=null!==b&&b.apply(this,arguments)||this;c.data=void 0;c.options=void 0;c.points=void 0;c.smallestWeight=void 0;c.greatestWeight=void 0;c.centerOfPoints=void 0;return c}k(a,b);a.getLength=function(c,a){return Math.sqrt(c*c+a*a)};a.normalize=function(c,a){var g=this.getLength(c,a);return[c/g,a/g]};a.markerEndPath=function(c,a,b,e){var g=I(e.width||0,this.getLength(a[0]-c[0],a[1]-c[1])),d=e.markerType||"arrow",n=this.normalize(a[0]-
c[0],a[1]-c[1]);e=n[0];n=n[1];var u=[];if("arrow"===d){var m=c[0],p=c[1];u.push(["L",m-e*g,p-n*g]);u.push(["L",b[0],b[1]]);m=a[0];p=a[1];u.push(["L",m+e*g,p+n*g])}if("mushroom"===d){d=c[0];c=c[1];m=a[0];a=a[1];var l=(m-d)/2+d;p=(a-c)/2+c;l=2*(b[0]-l)+l;b=2*(b[1]-p)+p;u.push(["L",d-e*g,c-n*g]);u.push(["Q",l,b,m+e*g,a+n*g])}return u};a.prototype.animate=function(a){var c=this.points;a||c.forEach(function(a){if(a.shapeArgs&&G(a.shapeArgs.d)&&a.shapeArgs.d.length){var c=a.shapeArgs.d,b=c[0][1],g=c[0][2];
if(b&&g){for(var d=[],u=0;u<c.length;u++){d.push(B([],c[u],!0));for(var m=1;m<c[u].length;m++)d[u][m]=m%2?b:g}a.graphic&&(a.graphic.attr({d:d}),a.graphic.animate({d:c}))}}})};a.prototype.getLinkWidth=function(a){var c=this.options.width,b=a.options.weight||this.options.weight;a.options.weight=b;if(c&&!b)return c;a=this.smallestWeight;c=this.greatestWeight;if(!F(b)||!a||!c)return 0;var e=this.options.minWidth;return(b-a)*(this.options.maxWidth-e)/(c-a||1)+e};a.prototype.autoCurve=function(a,b,d,e,
D,r){var c=d-a,g=e-b;a=(d-a)/2+a-D;b=(e-b)/2+b-r;c=Math.atan2(c*b-g*a,c*a+g*b);c=180*c/Math.PI;0>c&&(c=360+c);c=c*Math.PI/180;return.7*-Math.sin(c)};a.prototype.pointAttribs=function(a,b){b=h.prototype.pointAttribs.call(this,a,b);b.fill=w(a.options.fillColor,a.options.color,"none"===this.options.fillColor?null:this.options.fillColor,this.color);b["fill-opacity"]=w(a.options.fillOpacity,this.options.fillOpacity);b["stroke-width"]=w(a.options.lineWidth,this.options.lineWidth,1);a.options.opacity&&(b.opacity=
a.options.opacity);return b};a.prototype.translate=function(){var a=this;!this.chart.hasRendered||!this.isDirtyData&&this.hasRendered||(this.processData(),this.generatePoints());var b=[],d=0,e=0;this.points.forEach(function(c){function g(a){return G(a)?{lon:a[0],lat:a[1]}:a}function D(a){a=m.get(a);if(a instanceof C&&a.plotX&&a.plotY)return K(a,"update",f),{x:a.plotX,y:a.plotY}}function f(){c.series.isDirty=!0}var m=a.chart,p=m.mapView,l=c.options,v,q;"string"===typeof l.from?v=D(l.from):"object"===
typeof l.from&&p&&(v=p.lonLatToPixels(g(l.from)));"string"===typeof l.to?q=D(l.to):"object"===typeof l.to&&p&&(q=p.lonLatToPixels(g(l.to)));c.fromPos=v;c.toPos=q;v&&q&&(d+=(v.x+q.x)/2,e+=(v.y+q.y)/2);w(c.options.weight,a.options.weight)&&b.push(w(c.options.weight,a.options.weight))});this.smallestWeight=M(b);this.greatestWeight=L(b);this.centerOfPoints={x:d/this.points.length,y:e/this.points.length};this.points.forEach(function(b){a.getLinkWidth(b)?(b.fromPos&&(b.plotX=b.fromPos.x,b.plotY=b.fromPos.y),
b.shapeType="path",b.shapeArgs=a.getPointShapeArgs(b),b.color=w(b.options.color,b.series.color)):b.shapeArgs={d:[]}})};a.prototype.getPointShapeArgs=function(b){var c,d=b.fromPos,e=b.toPos;if(!d||!e)return{};var f=this.getLinkWidth(b)/2,r=b.options,n=H(this.options.markerEnd,r.markerEnd),u=w(r.growTowards,this.options.growTowards),m=d.x||0,p=d.y||0;d=e.x||0;var l=e.y||0;r=w(r.curveFactor,this.options.curveFactor);var v=n&&n.enabled&&n.height||0;F(r)||(r=this.autoCurve(m,p,d,l,this.centerOfPoints.x,
this.centerOfPoints.y));if(v){v=I(v,4*f);var q=.5*(d-m);var h=.5*(l-p);var t=m+q;h=a.normalize(t+h*r-d,p+h+-q*r-l);t=h[1];d+=h[0]*v;l+=t*v}q=.5*(d-m);var k=.5*(l-p);var y=m+q,x=p+k;t=q;q=k;k=-t;h=a.normalize(q,k);v=h[0];h=h[1];t=1+.25*Math.sqrt(r*r);v*=f*t;h*=f*t;q=y+q*r;r=x+k*r;t=a.normalize(q-m,r-p);k=t[0];y=t[1];t=k;k=y*f;y=-t*f;t=a.normalize(q-d,r-l);x=t[0];var z=t[1];t=x;x=-z*f;z=t*f;u&&(k/=f,y/=f,v/=4,h/=4);f={d:[["M",m-k,p-y],["Q",q-v,r-h,d-x,l-z],["L",d+x,l+z],["Q",q+v,r+h,m+k,p+y],["Z"]]};
n&&n.enabled&&f.d&&(e=a.markerEndPath([d-x,l-z],[d+x,l+z],[e.x,e.y],n),(c=f.d).splice.apply(c,B([2,0],e,!1)));n=b.options.from;e=b.options.to;c=n.lat;n=n.lon;u=e.lat;e=e.lon;c&&n&&(b.options.from="".concat(+c,", ").concat(+n));u&&e&&(b.options.to="".concat(+u,", ").concat(+e));return f};a.defaultOptions=H(E.defaultOptions,{animation:!0,dataLabels:{enabled:!1},fillOpacity:.5,markerEnd:{enabled:!0,height:"40%",width:"40%",markerType:"arrow"},width:1,maxWidth:25,minWidth:5,lineWidth:void 0,tooltip:{headerFormat:'<span style="font-size: 0.8em">{series.name}</span><br/>',
pointFormat:"{point.options.from} \u2192 {point.options.to}: <b>{point.options.weight}</b>"}});return a}(E);A(b.prototype,{pointClass:a,pointArrayMap:["from","to","weight"],drawPoints:J.prototype.drawPoints,useMapGeometry:!0});f.registerSeriesType("flowmap",b);"";return b});k(a,"masters/modules/flowmap.src.js",[],function(){})});
//# sourceMappingURL=flowmap.js.map